<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.imzhitu.admin.trade.item.mapper.ItemAndSetRelationMapper">

	<resultMap id="ItemMap" type="com.imzhitu.admin.trade.item.pojo.Item">
		<id column="id" property="id" javaType="java.lang.Integer"/>
		<result column="name" property="name" javaType="java.lang.String"/>
		<result column="summary" property="summary" javaType="java.lang.String"/>
		<result column="description" property="description" javaType="java.lang.String"/>
		<result column="world_id" property="worldId" javaType="java.lang.Integer"/>
		<result column="img_path" property="imgPath" javaType="java.lang.String"/>
		<result column="img_thumb" property="imgThumb" javaType="java.lang.String"/>
		<result column="price" property="price" javaType="java.math.BigDecimal"/>
		<result column="sale" property="sale" javaType="java.math.BigDecimal"/>
		<result column="sales" property="sales" javaType="java.lang.Integer"/>
		<result column="stock" property="stock" javaType="java.lang.Integer"/>
		<result column="item_id" property="itemId" javaType="java.lang.Integer"/>
		<result column="item_type" property="itemType" javaType="java.lang.Integer"/>
		<result column="category_id" property="categoryId" javaType="java.lang.Integer"/>
		<result column="brand_id" property="brandId" javaType="java.lang.Integer"/>
		<result column="like_num" property="like" javaType="java.lang.Integer"/>
	</resultMap>

	<!-- 插入关系表中数据 -->
	<insert id="insertItemToSet">
		insert into 
			hts.item_set_r
			(item_id,item_set_id)
	 	values 
	 		(#{itemId}, #{itemSetId})
	</insert>
	
	<!-- 根据商品集合id，查询其下的商品id集合 -->
	<select id="queryItemListBySetId" resultMap="ItemMap">
		select 
			i.*
		from 
			hts.item_set_r isr, 
			hts.item i
		where 
			isr.item_set_id = #{itemSetId}
			and isr.item_id = i.id
	</select>
	
	
	
	<delete id="batchDeleteItemFromSet">
	delete from 
		hts.item_set_r
	where
		item_id = #{itemId}	and item_set_id = #{itemSetId}
	</delete>
	
</mapper>